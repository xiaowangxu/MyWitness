[gd_scene load_steps=6 format=3 uid="uid://pfjfgsawa3gm"]

[ext_resource type="Script" path="res://addons/SunPuzzleEditor/EditorPanel.gd" id="1_p3dkc"]
[ext_resource type="Script" path="res://addons/SunPuzzleEditor/PuzzlePanel.gd" id="2_jhu30"]
[ext_resource type="Script" path="res://addons/SunPuzzleEditor/Grid.gd" id="2_nl7ek"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_mv18f"]
bg_color = Color(0.219608, 0.219608, 0.219608, 1)

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_nxpnc"]
blend_mode = 2

[node name="Node2D" type="Node2D"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="PuzzleEditor" type="PanelContainer" parent="CanvasLayer"]
clip_contents = true
anchor_right = 1.0
offset_bottom = 122.0
grow_horizontal = 2
size_flags_vertical = 0
theme_override_styles/panel = SubResource( "StyleBoxFlat_mv18f" )
script = ExtResource( "1_p3dkc" )

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer/PuzzleEditor"]
offset_right = 1920.0
offset_bottom = 122.0
theme_override_constants/margin_left = 5
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 5
theme_override_constants/margin_bottom = 5

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/PuzzleEditor/MarginContainer"]
clip_contents = true
offset_left = 5.0
offset_top = 5.0
offset_right = 1915.0
offset_bottom = 117.0
size_flags_horizontal = 3
size_flags_vertical = 0

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer"]
offset_right = 1910.0
offset_bottom = 31.0

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer"]
clip_contents = true
offset_right = 1910.0
offset_bottom = 31.0
size_flags_horizontal = 3
size_flags_vertical = 0

[node name="Button" type="Button" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer/HBoxContainer"]
offset_right = 43.0
offset_bottom = 31.0
text = "New"

[node name="Button2" type="Button" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer/HBoxContainer"]
offset_left = 47.0
offset_right = 93.0
offset_bottom = 31.0
text = "Load"

[node name="Button3" type="Button" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer/HBoxContainer"]
offset_left = 97.0
offset_right = 141.0
offset_bottom = 31.0
text = "Save"

[node name="ConfirmationDialog" type="ConfirmationDialog" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer/HBoxContainer"]
title = "New Puzzle"
dialog_text = "Create a New Puzzle?
Unsaved Puzzle will be discarded"

[node name="FileDialog" type="FileDialog" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer/HBoxContainer"]
title = "Open a File"
size = Vector2i(800, 600)
dialog_text = "Select Puzzle File"
file_mode = 0
show_hidden_files = true

[node name="HSeparator" type="HSeparator" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer"]
offset_top = 35.0
offset_right = 1910.0
offset_bottom = 39.0

[node name="VBoxContainer3" type="VBoxContainer" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer"]
offset_top = 43.0
offset_right = 1910.0
offset_bottom = 69.0

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer3"]
clip_contents = true
offset_right = 1910.0
offset_bottom = 26.0
size_flags_horizontal = 3
size_flags_vertical = 0

[node name="Label" type="Label" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer3/HBoxContainer"]
offset_right = 64.0
offset_bottom = 26.0
text = "BGColor"

[node name="ColorPickerButton" type="ColorPickerButton" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer3/HBoxContainer"]
minimum_size = Vector2(50, 0)
offset_left = 68.0
offset_right = 118.0
offset_bottom = 26.0
color = Color(1, 1, 1, 1)

[node name="VSeparator2" type="VSeparator" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer3/HBoxContainer"]
offset_left = 122.0
offset_right = 126.0
offset_bottom = 26.0

[node name="Label3" type="Label" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer3/HBoxContainer"]
offset_left = 130.0
offset_right = 163.0
offset_bottom = 26.0
size_flags_horizontal = 8
text = "(1,1)"
horizontal_alignment = 2

[node name="HSeparator2" type="HSeparator" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer"]
offset_top = 73.0
offset_right = 1910.0
offset_bottom = 77.0

[node name="VBoxContainer2" type="VBoxContainer" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer"]
offset_top = 81.0
offset_right = 1910.0
offset_bottom = 112.0

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2"]
clip_contents = true
offset_right = 1910.0
offset_bottom = 31.0
size_flags_horizontal = 3
size_flags_vertical = 0

[node name="CheckBox" type="CheckBox" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer"]
offset_right = 61.0
offset_bottom = 31.0
button_pressed = true
text = "Grid"

[node name="SpinBoxH" type="SpinBox" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer"]
minimum_size = Vector2(160, 0)
offset_left = 65.0
offset_right = 225.0
offset_bottom = 31.0
min_value = 1.0
max_value = 400.0
value = 10.0
suffix = "splits"

[node name="SpinBoxV" type="SpinBox" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer"]
minimum_size = Vector2(160, 0)
offset_left = 229.0
offset_right = 389.0
offset_bottom = 31.0
min_value = 1.0
max_value = 400.0
value = 10.0
suffix = "splits"

[node name="CheckBox2" type="CheckBox" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer"]
offset_left = 393.0
offset_right = 460.0
offset_bottom = 31.0
text = "Snap"

[node name="VSeparator2" type="VSeparator" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer"]
offset_left = 464.0
offset_right = 468.0
offset_bottom = 31.0

[node name="Label" type="Label" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer"]
offset_left = 472.0
offset_top = 2.0
offset_right = 547.0
offset_bottom = 28.0
text = "MarginTB"

[node name="SpinBoxH2" type="SpinBox" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer"]
offset_left = 551.0
offset_right = 634.0
offset_bottom = 31.0
min_value = 1.0
max_value = 400.0
value = 40.0
suffix = "px"

[node name="Label2" type="Label" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer"]
offset_left = 638.0
offset_top = 2.0
offset_right = 712.0
offset_bottom = 28.0
text = "MarginLR"

[node name="SpinBoxV2" type="SpinBox" parent="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer"]
offset_left = 716.0
offset_right = 799.0
offset_bottom = 31.0
min_value = 1.0
max_value = 400.0
value = 40.0
suffix = "px"

[node name="Node2D" type="Node2D" parent="."]
position = Vector2(5, 128)

[node name="PuzzlePanel" type="Node2D" parent="Node2D"]
unique_name_in_owner = true
script = ExtResource( "2_jhu30" )

[node name="ColorRect" type="ColorRect" parent="Node2D/PuzzlePanel"]
minimum_size = Vector2(800, 800)
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Grid" type="Node2D" parent="Node2D/PuzzlePanel"]
modulate = Color(1, 1, 0, 1)
script = ExtResource( "2_nl7ek" )

[node name="Helpers" type="Node2D" parent="Node2D/PuzzlePanel"]

[node name="Cursor" type="Polygon2D" parent="Node2D/PuzzlePanel"]
unique_name_in_owner = true
material = SubResource( "CanvasItemMaterial_nxpnc" )
scale = Vector2(3, 3)
polygon = PackedVector2Array(1, 4, 1, 1, 4, 1, 4, -1, 1, -1, 1, -4, -1, -4, -1, -1, -4, -1, -4, 1, -1, 1, -1, 4)

[connection signal="pressed" from="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer/HBoxContainer/Button" to="CanvasLayer/PuzzleEditor" method="_on_button_pressed"]
[connection signal="pressed" from="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer/HBoxContainer/Button2" to="CanvasLayer/PuzzleEditor" method="_on_button_2_pressed"]
[connection signal="color_changed" from="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer3/HBoxContainer/ColorPickerButton" to="CanvasLayer/PuzzleEditor" method="_on_color_picker_button_color_changed"]
[connection signal="toggled" from="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer/CheckBox" to="CanvasLayer/PuzzleEditor" method="_on_check_box_toggled"]
[connection signal="value_changed" from="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer/SpinBoxH" to="CanvasLayer/PuzzleEditor" method="_on_spin_box_h_value_changed"]
[connection signal="value_changed" from="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer/SpinBoxV" to="CanvasLayer/PuzzleEditor" method="_on_spin_box_v_value_changed"]
[connection signal="toggled" from="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer/CheckBox2" to="CanvasLayer/PuzzleEditor" method="_on_check_box_2_toggled"]
[connection signal="value_changed" from="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer/SpinBoxH2" to="CanvasLayer/PuzzleEditor" method="_on_spin_box_h_2_value_changed"]
[connection signal="value_changed" from="CanvasLayer/PuzzleEditor/MarginContainer/VBoxContainer/VBoxContainer2/HBoxContainer/SpinBoxV2" to="CanvasLayer/PuzzleEditor" method="_on_spin_box_v_2_value_changed"]
